jQuery(document).ready(function(t){var e=5;t(document).on("click",".start-import-popup",function(e){e.preventDefault();var i='<img src="'+t(this).data("thumb")+'" />';t(".tophive-demo-importer-wrapper .tophive-demo-importer-popup-thumb").html(i),t(".tophive-demo-importer-wrapper").addClass("active");var a=t(this).data("slug"),n=t(this).data("id");t(".tophive-demo-importer-wrapper a").attr("data-slug",a),t.ajax({url:TophiveAdminAjax.ajaxurl,type:"POST",data:{action:"process_required_plugins",item:a,selected:n},beforeSend:function(){t(".tophive-demo-importer-popup-content").html("<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' style='margin: auto; background: none; display: block; shape-rendering: auto;' width='137px' height='137px' viewBox='0 0 100 100' preserveAspectRatio='xMidYMid'><path d='M35 50A15 15 0 0 0 65 50A15 16.3 0 0 1 35 50' fill='#292664' stroke='none' transform='rotate(177.696 50 50.65)'><animateTransform attributeName='transform' type='rotate' dur='0.5025125628140703s' repeatCount='indefinite' keyTimes='0;1' values='0 50 50.65;360 50 50.65'></animateTransform></path></svg>")},success:function(e){t(".tophive-demo-importer-popup-content").html(e)},error:function(t,e,i){console.log(t.responseText)}})}),t(document).on("click",".tophive-demo-plugin-install",function(e){e.preventDefault();var i=t(this).data("slug"),a=t(this).data("id"),n=[],o=t("ul.popup-plugins-list>li");t.each(o,function(e,i){n.push(t(i).data("slug"))});n[0];!function e(i){t.ajax({url:TophiveAdminAjax.ajaxurl,type:"POST",data:i}).done(function(i){if(console.log(i),""!==i.status&&"uninstalled"==i.status){var a={action:"demos_plugin_install",plugin:i.plugin};t(".popup-plugins-list li."+i.plugin+" span:last-child").addClass("warning").html(i.text),e(a)}else if(""!==i.status&&"installed"==i.status){var a={action:"demos_plugin_activate",plugin:i.plugin};t(".popup-plugins-list li."+i.plugin+" span:last-child").html(i.text),e(a)}else if(""!==i.status&&"active"==i.status)if("done"!==i.next_plugin){var a={action:"demos_plugin_check_next",plugin:i.next_plugin};t(".popup-plugins-list li."+i.plugin+" span:last-child").removeClass("warning").addClass("success").html(i.text),e(a)}else{t(".popup-plugins-list li."+i.plugin+" span:last-child").removeClass("warning").addClass("success").html(i.text);var a={action:"plugins_ok_footer"};e(a)}else""!==i.status&&"next"==i.status&&(t(".tophive-demo-importer-popup-content .import-inner-footer").html(i.html),t(".tophive-demo-importer-popup-content .import-inner-footer").removeClass("loading"))}).fail(function(t){console.log(t)})}({action:"demos_plugin_status_check",slug:i,selected:a,plugins:n}),t(this).closest(".import-inner-footer").addClass("loading")}),t(document).on("click",".start-demo-import",function(i){i.preventDefault();t(this);var a=t(this).data("slug"),n=t(this).data("id"),o={action:"process_demo_import",security:TophiveAdminAjax.ajax_nonce,slug:a,selected:n};e=5,t(".start-demo-import").parent().find("a").fadeOut(200,function(){t(".tophive-progress-bar span").html("5%"),t(".start-demo-import").parent().find(".tophive-progress").fadeIn(300)}),setInterval(function(){100==e?e=100:90==e?e=90:e<81&&e>77?e=80:e+=1;var i=e+"%";t(".tophive-progress-bar span").html(i),t(".tophive-progress-bar").css("width",i)},2e3),function i(a){t.ajax({url:TophiveAdminAjax.ajaxurl,type:"POST",data:a,beforeSend:function(){}}).done(function(n){if(console.log(n),void 0!==n.status&&"newAJAX"===n.status)i(a);else if(void 0!==n.status&&"customizerAJAX"===n.status){var o=(e=90)+"%";t(".tophive-progress-bar span").html(o),t(".tophive-progress-bar").css("width",o),i({action:"tophive_import_customizer_data",security:TophiveAdminAjax.ajax_nonce})}else void 0!==n.status&&"afterAllImportAJAX"===n.status?(o=(e=100)+"%",t(".tophive-progress-bar span").html(o),t(".tophive-progress-bar").css("width",o),i({action:"ocdi_after_import_data",security:TophiveAdminAjax.ajax_nonce})):void 0!==n.message?t(".tophive-demo-importer-popup-content").html(n.message):console.log(n)}).fail(function(t){console.log(t)})}(o)}),t(document).on("click",".tophive-demo-importer-popup-content .plugins-ok",function(e){e.preventDefault();var i=t(this).data("slug"),a=t(this).data("id");t.ajax({url:TophiveAdminAjax.ajaxurl,type:"POST",data:{action:"process_demo_import_html",item:i,selected:a},beforeSend:function(){t(".tophive-demo-importer-popup-content").html("<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' style='margin: auto; background: none; display: block; shape-rendering: auto;' width='137px' height='137px' viewBox='0 0 100 100' preserveAspectRatio='xMidYMid'><path d='M35 50A15 15 0 0 0 65 50A15 16.3 0 0 1 35 50' fill='#292664' stroke='none' transform='rotate(177.696 50 50.65)'><animateTransform attributeName='transform' type='rotate' dur='0.5025125628140703s' repeatCount='indefinite' keyTimes='0;1' values='0 50 50.65;360 50 50.65'></animateTransform></path></svg>")},success:function(e){t(".tophive-demo-importer-popup-content").html(e)},error:function(t,e,i){console.log(t.responseText)}})}),t('input[name="tophive_selected_plugins"]').change(function(){var e=[];t.each(t('input[name="tophive_selected_plugins"]:checked'),function(){e.push(t(this).val())}),e.length>0?t(".tophive-plugins-action").removeClass("deactive"):t(".tophive-plugins-action").addClass("deactive")});var i='<svg class="tophive-active" width="1.3em" height="1.3em" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"></path></svg>';t(document).on("click",".tophive-plugins-import",function(e){e.preventDefault();var a=[];(t(".tophive-plugins-action").addClass("loading"),t.each(t('input[name="tophive_selected_plugins"]:checked'),function(){a.push(t(this).val())}),a.length>0)&&function e(a){t.ajax({url:TophiveAdminAjax.ajaxurl,type:"POST",data:a}).done(function(a){if(""!==a.status&&"uninstalled"==a.status){var n={action:"demos_plugin_install",plugin:a.plugin};t(".tophive-plugin-installation tr."+a.plugin+" td.plugin-status").removeClass("tophive-uninstalled").addClass("tophive-installed").html(a.text),e(n)}else if(""!==a.status&&"installed"==a.status)n={action:"demos_plugin_activate",plugin:a.plugin},t(".tophive-plugin-installation tr."+a.plugin+" td.plugin-status").html(a.text),e(n);else if(""!==a.status&&"active"==a.status)"done"!==a.next_plugin?(n={action:"demos_plugin_check_next",plugin:a.next_plugin},t(".tophive-plugin-installation tr."+a.plugin+" td.plugin-status").removeClass("tophive-installed").addClass("tophive-active").html(a.text),t(".tophive-plugin-installation tr."+a.plugin+" td.action").html(i),e(n)):(t(".tophive-plugin-installation tr."+a.plugin+" td.plugin-status").removeClass("tophive-installed").addClass("tophive-active").html(a.text),t(".tophive-plugin-installation tr."+a.plugin+" td.action").html(i),e(n={action:"plugins_done_footer"}));else if(""!==a.status&&"next"==a.status){t(".tophive-plugins-action").removeClass("loading");var o=t(".tophive-plugins-action a");t(".tophive-plugins-action a").fadeOut(200,function(){t(".tophive-plugins-action").html('<span class="confirm">'+a.html+"</span>")}),setTimeout(function(){t(".tophive-plugins-action .confirm").fadeOut(200,function(){t(".tophive-plugins-action .confirm").html(""),t(".tophive-plugins-action").addClass("deactive").html(o),t(".tophive-plugins-action a").fadeIn(200)})},4e3)}}).fail(function(t){console.log(t)})}({action:"demos_plugin_status_check",plugins:a})}),t(document).on("keyup",'input[name="tophive-theme-purchase-key"]',function(){""!==t('input[name="tophive-theme-purchase-key"]').val()?t(".tophive-activate-theme").addClass("tophive-activate-theme-enabled"):t(".tophive-activate-theme").removeClass("tophive-activate-theme-enabled")}),t(document).on("click",".tophive-activate-theme-enabled",function(e){e.preventDefault();var i=t('input[name="tophive-theme-purchase-key"]').val();t(this).addClass("loading"),t(".tophive-activate-theme").html(TophiveAdminAjax.activating),t.ajax({url:TophiveAdminAjax.ajaxurl,type:"POST",data:{action:"theme_activation",key:i},success:function(e){"activated"==e?t(".tophive-activation-success-message").addClass(e):(t(".tophive-activate-theme").html(TophiveAdminAjax.activation_text),t(".tophive-messages").html(e))},error:function(t,e,i){console.log(t.responseText)}})}),t(document).on("click",".end-import-popup",function(e){e.preventDefault(),t(".tophive-demo-importer-wrapper").removeClass("active")}),t(document).keyup(function(e){!function(e){"Escape"===e.key&&t(".tophive-demo-importer-wrapper").removeClass("active")}(e)}),t(".tabs a").click(function(){t(".panel").hide(),t(".tabs a.active").removeClass("active"),t(this).addClass("active");var e=t(this).attr("href");return t(e).fadeIn(200),!1}),t(".tabs li:first a").click(),t(".tophive-regenerate-assets").on("click",function(e){e.preventDefault();var i=t(this);i.addClass("updating-message disabled"),t.get(TophiveAdminAjax.regenerate_url,function(){i.removeClass("updating-message disabled"),t(".regeneration-completed").html(TophiveAdminAjax.regenerate_done)})})});